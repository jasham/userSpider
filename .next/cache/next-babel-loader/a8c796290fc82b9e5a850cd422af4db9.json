{"ast":null,"code":"import _regeneratorRuntime from \"/Users/apple/Desktop/mydir/projects/personal/spidy/fe_2/spidy_fe/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/apple/Desktop/mydir/projects/personal/spidy/fe_2/spidy_fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport request from '../utility/apiWrapper';\nimport { GlobalContext } from '../../../pages/_app';\nimport { AUTH_STATUS } from '../utility/type';\n\nvar login = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n    var globalContext, loginData, stringifiedData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            globalContext = React.u(GlobalContext);\n            _context.next = 3;\n            return request({\n              url: '/userlogin',\n              method: 'post',\n              data: data\n            });\n\n          case 3:\n            loginData = _context.sent;\n\n            if (loginData.result === 'success') {\n              document.cookie = \"token=\".concat(loginData.token);\n              stringifiedData = JSON.stringify(loginData.data);\n              localStorage.setItem('userInfo', stringifiedData);\n              globalContext.allDispatch({\n                type: AUTH_STATUS,\n                value: true\n              });\n            } else if (loginData.result === 'wrongEmail') {}\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function login(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default login;","map":{"version":3,"sources":["/Users/apple/Desktop/mydir/projects/personal/spidy/fe_2/spidy_fe/app/lib/services/login.js"],"names":["React","request","GlobalContext","AUTH_STATUS","login","data","globalContext","u","url","method","loginData","result","document","cookie","token","stringifiedData","JSON","stringify","localStorage","setItem","allDispatch","type","value"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,WAAT,QAA4B,iBAA5B;;AAEA,IAAMC,KAAK;AAAA,sEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACNC,YAAAA,aADM,GACUN,KAAK,CAACO,CAAN,CAAQL,aAAR,CADV;AAAA;AAAA,mBAGYD,OAAO,CAAC;AAAEO,cAAAA,GAAG,EAAE,YAAP;AAAqBC,cAAAA,MAAM,EAAE,MAA7B;AAAqCJ,cAAAA,IAAI,EAAJA;AAArC,aAAD,CAHnB;;AAAA;AAGNK,YAAAA,SAHM;;AAIZ,gBAAIA,SAAS,CAACC,MAAV,KAAqB,SAAzB,EAAoC;AAClCC,cAAAA,QAAQ,CAACC,MAAT,mBAA2BH,SAAS,CAACI,KAArC;AACMC,cAAAA,eAF4B,GAEVC,IAAI,CAACC,SAAL,CAAeP,SAAS,CAACL,IAAzB,CAFU;AAGlCa,cAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCJ,eAAjC;AACAT,cAAAA,aAAa,CAACc,WAAd,CAA0B;AACxBC,gBAAAA,IAAI,EAAElB,WADkB;AAExBmB,gBAAAA,KAAK,EAAE;AAFiB,eAA1B;AAID,aARD,MAQO,IAAIZ,SAAS,CAACC,MAAV,KAAqB,YAAzB,EAAuC,CAC7C;;AAbW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALP,KAAK;AAAA;AAAA;AAAA,GAAX;;AAeA,eAAeA,KAAf","sourcesContent":["import React from 'react';\nimport request from '../utility/apiWrapper';\nimport { GlobalContext } from '../../../pages/_app';\nimport { AUTH_STATUS } from '../utility/type';\n\nconst login = async (data) => {\n  const globalContext = React.u(GlobalContext);\n\n  const loginData = await request({ url: '/userlogin', method: 'post', data });\n  if (loginData.result === 'success') {\n    document.cookie = `token=${loginData.token}`;\n    const stringifiedData = JSON.stringify(loginData.data);\n    localStorage.setItem('userInfo', stringifiedData);\n    globalContext.allDispatch({\n      type: AUTH_STATUS,\n      value: true,\n    });\n  } else if (loginData.result === 'wrongEmail') {\n  }\n};\nexport default login;\n"]},"metadata":{},"sourceType":"module"}