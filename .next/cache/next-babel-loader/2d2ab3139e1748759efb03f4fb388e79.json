{"ast":null,"code":"import React from 'react';\nimport request from '../utility/apiWrapper';\nimport { GlobalContext } from '../../../pages/_app';\nimport { AUTH_STATUS } from '../utility/type';\n\nconst login = async data => {\n  const globalContext = React.u(GlobalContext);\n  const loginData = await request({\n    url: '/userlogin',\n    method: 'post',\n    data\n  });\n\n  if (loginData.result === 'success') {\n    document.cookie = `token=${loginData.token}`;\n    const stringifiedData = JSON.stringify(loginData.data);\n    localStorage.setItem('userInfo', stringifiedData);\n    globalContext.allDispatch({\n      type: AUTH_STATUS,\n      value: true\n    });\n  } else if (loginData.result === 'wrongEmail') {}\n};\n\nexport default login;","map":{"version":3,"sources":["/Users/apple/Desktop/mydir/projects/personal/spidy/fe_2/spidy_fe/app/lib/services/login.js"],"names":["React","request","GlobalContext","AUTH_STATUS","login","data","globalContext","u","loginData","url","method","result","document","cookie","token","stringifiedData","JSON","stringify","localStorage","setItem","allDispatch","type","value"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,WAAT,QAA4B,iBAA5B;;AAEA,MAAMC,KAAK,GAAG,MAAOC,IAAP,IAAgB;AAC5B,QAAMC,aAAa,GAAGN,KAAK,CAACO,CAAN,CAAQL,aAAR,CAAtB;AAEA,QAAMM,SAAS,GAAG,MAAMP,OAAO,CAAC;AAAEQ,IAAAA,GAAG,EAAE,YAAP;AAAqBC,IAAAA,MAAM,EAAE,MAA7B;AAAqCL,IAAAA;AAArC,GAAD,CAA/B;;AACA,MAAIG,SAAS,CAACG,MAAV,KAAqB,SAAzB,EAAoC;AAClCC,IAAAA,QAAQ,CAACC,MAAT,GAAmB,SAAQL,SAAS,CAACM,KAAM,EAA3C;AACA,UAAMC,eAAe,GAAGC,IAAI,CAACC,SAAL,CAAeT,SAAS,CAACH,IAAzB,CAAxB;AACAa,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCJ,eAAjC;AACAT,IAAAA,aAAa,CAACc,WAAd,CAA0B;AACxBC,MAAAA,IAAI,EAAElB,WADkB;AAExBmB,MAAAA,KAAK,EAAE;AAFiB,KAA1B;AAID,GARD,MAQO,IAAId,SAAS,CAACG,MAAV,KAAqB,YAAzB,EAAuC,CAC7C;AACF,CAdD;;AAeA,eAAeP,KAAf","sourcesContent":["import React from 'react';\nimport request from '../utility/apiWrapper';\nimport { GlobalContext } from '../../../pages/_app';\nimport { AUTH_STATUS } from '../utility/type';\n\nconst login = async (data) => {\n  const globalContext = React.u(GlobalContext);\n\n  const loginData = await request({ url: '/userlogin', method: 'post', data });\n  if (loginData.result === 'success') {\n    document.cookie = `token=${loginData.token}`;\n    const stringifiedData = JSON.stringify(loginData.data);\n    localStorage.setItem('userInfo', stringifiedData);\n    globalContext.allDispatch({\n      type: AUTH_STATUS,\n      value: true,\n    });\n  } else if (loginData.result === 'wrongEmail') {\n  }\n};\nexport default login;\n"]},"metadata":{},"sourceType":"module"}